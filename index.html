<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>QuickShop-Hikari // Paste Reader</title>
    <link rel="stylesheet" href="https://unpkg.com/sakura.css/css/sakura.css" type="text/css">
    <script src="https://unpkg.com/jquery@3.6.0/dist/jquery.min.js"></script>

</head>

<body style="max-width: 70em !important;">
    <main>
        <h1 id="title">Welcome to QuickShop-Hikari Paste Viewer</h1>
        <p id="description">Type <pre>/qs paste</pre> in game to create a paste.</p>
    </main>
    <script>
        function GetQueryString(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return unescape(r[2]); return null;
        }
        if (GetQueryString("remote")) {
            $("#title").text("Loading...");
            $("#description").text("Please wait... Paste reader are retrieve the content from remote server...");

            $.ajax({
                url: GetQueryString("remote"),
                success: function (data, status, xhr) {
                    console.log(data);
                    localStorage.removeItem('callbackHTML');
                    localStorage.setItem('callbackHML', data);
                    alert(data);
                    window.location.href = 'callback.html';
                },
                error: function (xhr, status, error) {
                    var url = GetQueryString("remote");
                    $("#title").text("Failed to load.");
                    $("#description").text("Viewer cannot fetch the context from " + url + ", try press F5 to try again");
                },
            });
        }
    </script>
</body>


<footer>

</footer>

</html>
