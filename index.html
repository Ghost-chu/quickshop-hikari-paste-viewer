<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>QuickShop-Hikari // Paste Reader</title>
    <link rel="stylesheet" href="https://unpkg.com/sakura.css/css/sakura.css" type="text/css">
    <script src="https://unpkg.com/jquery@3.6.0/dist/jquery.min.js"></script>

</head>

<body style="max-width: 70em !important;">
    <main>
        <h1 id="title">Welcome to QuickShop-Hikari Paste Viewer</h1>
        <p id="description">Type <code>/qs paste</code> in game to create a paste.</p>
    </main>
    <script>
        function GetQueryString(name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return unescape(r[2]); return null;
        }
        if (GetQueryString("remote")) {
            $("#title").text("Loading...");
            $("#description").text("Please wait... Paste viewer are retrieve the content from remote server...");

            $.ajax({
                url: "https://quickshop-proxy.ghostchu.workers.dev/?url="+GetQueryString("remote"),
                success: function (response, status, xhr) {
                    document.write(response.data);
                    //localStorage.removeItem('callbackHTML');
                    //localStorage.setItem('callbackHTML', response.data);
                    //window.location.href="callback.html";
                },
                error: function (xhr, status, error) {
                    var url = GetQueryString("remote");
                    $("#title").text("Failed to load.");
                    $("#description").text("Viewer cannot fetch the context from <code>" + url + "</code>, try press F5 to try again.<br />If still doesn't work, please contact Ghost_chu.");
                },
            });
        }
    </script>
</body>


<footer>

</footer>

</html>
